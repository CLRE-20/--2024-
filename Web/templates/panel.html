<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ§åˆ¶é¢æ¿</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* CSS è®Šæ•¸ */
        :root {
            --status-color: red; /* é è¨­å­—é«”é¡è‰² */
        }

        /* æ•´é«”æ¨£å¼ */
        body {
            font-family: 'Roboto', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5deb3; /* å¡å…¶è‰²èƒŒæ™¯ */
            color: #333; /* ä¸»æ–‡å­—è‰²èª¿ */
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            width: 100vw;
        }

        /* æ¨™é¡Œæ¨£å¼ */
        .header {
            font-size: 26px;
            font-weight: 700;
            color: #8b4513; /* æ·±å¡å…¶è‰² */
            margin: 20px 0 10px 0;
            width: 90%;
            max-width: 800px;
            text-align: left;
        }

        .container {
            background: #f9f4ec; /* æ·¡å¡å…¶è‰²æ¡†èƒŒæ™¯ï¼Œèˆ‡ä¸»èƒŒæ™¯èåˆ */
            border-radius: 16px;
            padding: 20px;
            width: 90%;
            max-width: 800px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        /* å€å¡Šæ¨£å¼ */
        .section {
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 500;
            margin-bottom: 10px;
            color: #8b4513;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .content {
            background-color: #f5ede1; /* æ›´æŸ”å’Œçš„å…§éƒ¨èƒŒæ™¯è‰² */
            border-radius: 12px;
            padding: 15px;
            border: 1px solid rgba(210, 180, 140, 0.4); /* æ·¡åŒ–çš„é‚Šæ¡† */
            display: flex;
            color: #8b4513;
            justify-content: space-between;
            align-items: center;
        }

        .status {
            font-size: 16px;
            color: #333;
        }

        .status span {
            font-weight: bold;
        }

        .button {
            padding: 12px 24px;
            font-size: 16px;
            font-weight: 500;
            color: white;
            background: linear-gradient(135deg, #d2b48c, #c4a484);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .button:hover {
            background: linear-gradient(135deg, #c4a484, #d2b48c);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
            transform: translateY(-2px);
        }

        .button:active {
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            transform: translateY(0);
        }

        .button-container {
            display: flex;
            justify-content: flex-end;
            width: 100%;
        }

        /* ç™»å‡ºå€å¡Šæ¨£å¼ */
        .logout-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #f5ede1;
            border-radius: 12px;
            padding: 15px;
            border: 1px solid rgba(210, 180, 140, 0.4);
        }

        .logout-info {
            font-size: 16px;
            color: #8b4513;
            font-weight: 500;
            white-space: nowrap;
        }

        .logout-info span {
            margin-right: 20px;
        }


        /* é€šçŸ¥è¨Šæ¯æ¡† */
        .notification-box {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #f5ede1;
            border-radius: 12px;
            padding: 15px;
            border: 1px solid rgba(210, 180, 140, 0.4);
        }

        /* åŒæ­¥ç‹€æ…‹é¡è‰² */
        #email-status, 
        #product_id-status, 
        #power-status, 
        #door-status {
            color: var(--status-color);
        }
    </style>
</head>
<body>
    <div class="header">åœ°éœ‡æ–·é›»ç³»çµ±æ§åˆ¶é¢æ¿</div>

    <div class="container">
        <!-- åœ°éœ‡é€šçŸ¥ -->
        <div class="section">
            <div class="section-title">åœ°éœ‡é€šçŸ¥</div>
            <div class="notification-box" id="earthquake-notifications">
                <span id="earthquake-status" style="color: red;">N/A</span>
            </div>
        </div>

        <!-- å®¶ä¸­æ–·é›»ç‹€æ…‹ -->
        <div class="section">
            <div class="section-title">
                âš¡ å®¶ä¸­æ–·é›»ç‹€æ…‹
            </div>
            <div class="content">
                <div id="power-status-container" style="display: flex; align-items: center; white-space: nowrap;">
                    <span class="power-status-icon">é›»åŠ›ç‹€æ…‹ï¼š</span>
                    <span id="power-status">N/A</span>
                </div>
                <div class="button-container">
                    <button class="button" onclick="powerMQTT()">å¾©é›»</button>
                </div>
            </div>
        </div>

        <!-- é–€çš„ç‹€æ…‹ -->
        <div class="section">
            <div class="section-title">
                ğŸšª é–€çš„ç‹€æ…‹
            </div>
            <div class="content">
                <div id="door-status-container" style="display: flex; align-items: center; white-space: nowrap;">
                    <span>é–€ç‹€æ…‹ï¼š</span>
                    <span id="door-status" style="color: red;">N/A</span>
                </div>
                <div class="button-container">
                    <button class="button" onclick="doorMQTT()">é—œé–€</button>
                </div>
            </div>
        </div>

        <!-- åœ°éœ‡æ¨¡æ“¬ --> 
        <div class="section">
            <div class="section-title">åœ°éœ‡æ¨¡æ“¬</div>
            <div class="logout-bar">
                <div class="logout-info">
                    é‹è¡Œç‹€æ…‹ï¼š<span id="state-status" style="color: red;">N/A</span><br>
                    åœ°éœ‡å¼·åº¦ï¼š<span id="level-status" style="color: red;">N/A</span><br>
                    ç™¼ç”Ÿåœ°å€ï¼š<span id="area-status" style="color: red;">N/A</span>
                </div>                
                <div class="button-container">
                    <button type="button" class="button" onclick="earthquakeMQTT()">ç™¼é€æ¨¡æ“¬è«‹æ±‚</button>
                </div>               
            </div>
        </div>

        <!-- ç™»å‡º -->
        <div class="section">
            <div class="section-title">ç™»å…¥è³‡è¨Š</div>
            <div class="logout-bar">
                <div class="logout-info">
                    ä½¿ç”¨è€…ï¼š<span id="email-status" style="color: red;">N/A</span><br>
                    ç”¢å“ç·¨è™Ÿï¼š<span id="product_id-status" style="color: red;">N/A</span>
                </div>
                <form action="{{ url_for('logout')}}" method="get">
                    <button type="submit" class="button">ç™»å‡º</button>
                </form>
            </div>
        </div>
    </div>
    
    <script>
        // æ¢å¾©é›»åŠ›
        function powerMQTT() {
            fetch('/powerMQTT')
                .then(response => response.text())
                .then(data => {
                    alert(`é›»åŠ›æ¢å¾©ï¼š${data}`);
                })
                .catch(error => {
                    alert('æ¢å¾©é›»åŠ›æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œé‡è©¦');
                });
        }
        // é—œé–€
        function doorMQTT() {
            fetch('/doorMQTT')
                .then(response => response.text())
                .then(data => {
                    alert(`é–€å·²é—œé–‰ï¼š${data}`);
                })
                .catch(error => {
                    alert(`é—œé–€æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œé‡è©¦`);
                });
        }
        // åœ°éœ‡æ¨¡æ“¬
        function earthquakeMQTT() {
            fetch('/earthquakeMQTT')
                .then(response => response.text())
                .then(data => {
                    alert(`åœ°éœ‡æ¨¡æ“¬è«‹æ±‚å·²ç™¼é€ï¼š${data}`);
                })
                .catch(error => {
                    alert(`åœ°éœ‡æ¨¡æ“¬è«‹æ±‚æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œé‡è©¦`);
                });
        }

        // æ›´æ–°é›»åŠ›å’Œé–€çš„ç‹€æ…‹
        const powerStatus = document.getElementById('power-status');
        const doorStatus = document.getElementById('door-status');
        const earthquakeStatus = document.getElementById('earthquake-status');
        const emailStatus = document.getElementById('email-status');
        const product_idStatus = document.getElementById('product_id-status');
        const magnitudeStatus = document.getElementById('magnitude-status');
        const locationStatus = document.getElementById('location-status');
        const stateStatus = document.getElementById('state-status');
        const levelStatus = document.getElementById('level-status');
        const areaStatus = document.getElementById('area-status');

        function fetchData() {
            fetch('/data')
            .then(response => response.json())
            .then(data => {
                console.log('Data fetched:', JSON.stringify(data, null, 2)); // æ›´æ¸…æ™°çš„èª¿è©¦ä¿¡æ¯
                powerStatus.textContent = data.power;
                doorStatus.textContent = data.door;
                earthquakeStatus.textContent = data.earthquake;
                emailStatus.textContent = data.email;
                product_idStatus.textContent = data.product_id;
                magnitudeStatus.textContent = data.magnitude;
                locationStatus.textContent = data.location;
                stateStatus.textContent = data.state;
                levelStatus.textContent = data.level;
                areaStatus.textContent = data.area;
            })
            .catch(error => console.error('Error fetching data:', error));
        }


        // åˆæ¬¡è¼‰å…¥æ™‚ç²å–è³‡æ–™
        fetchData();

        // æ¯30ç§’ç²å–ä¸€æ¬¡è³‡æ–™
        setInterval(fetchData, 2000); //2ç§’

        // Placeholder functions for button actions
        function prevAction() {
            alert('Previous button clicked!');
        }

        function nextAction() {
            alert('Next button clicked!');
        }
    </script>
</body>
</html>
